<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jessie & Charlie's Soundboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Orbitron', sans-serif;
            padding: 20px;
        }

        h1 {
            color: #fff;
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow:
                0 0 10px #ff00ff,
                0 0 20px #ff00ff,
                0 0 40px #ff00ff;
        }

        .music-toggle {
            background: transparent;
            border: 2px solid #ff00ff;
            color: #ff00ff;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            padding: 10px 24px;
            cursor: pointer;
            border-radius: 30px;
            margin-bottom: 24px;
            transition: all 0.2s ease;
            box-shadow: 0 0 8px rgba(255,0,255,0.3);
            text-shadow: 0 0 6px #ff00ff;
        }

        .music-toggle:hover {
            background: rgba(255,0,255,0.15);
            box-shadow: 0 0 15px #ff00ff, 0 0 30px rgba(255,0,255,0.3);
        }

        .music-toggle.active {
            background: #ff00ff;
            color: #0a0a0a;
            text-shadow: none;
            box-shadow: 0 0 20px #ff00ff, 0 0 40px rgba(255,0,255,0.4);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            max-width: 900px;
            width: 100%;
        }

        .btn {
            position: relative;
            background: transparent;
            border: 2px solid var(--neon);
            color: var(--neon);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 28px 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.15s ease;
            box-shadow:
                0 0 8px var(--neon-dim),
                inset 0 0 8px var(--neon-dim);
            text-shadow: 0 0 6px var(--neon);
            word-break: break-word;
        }

        .btn:hover {
            background: var(--neon-dim);
            box-shadow:
                0 0 15px var(--neon),
                0 0 30px var(--neon-dim),
                inset 0 0 15px var(--neon-dim);
            transform: scale(1.03);
        }

        .btn:active,
        .btn.playing {
            background: var(--neon);
            color: #0a0a0a;
            text-shadow: none;
            transform: scale(0.97);
            box-shadow:
                0 0 20px var(--neon),
                0 0 40px var(--neon),
                0 0 60px var(--neon-dim);
        }

        @keyframes pulse {
            0%   { box-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon); }
            50%  { box-shadow: 0 0 30px var(--neon), 0 0 60px var(--neon), 0 0 80px var(--neon-dim); }
            100% { box-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon); }
        }

        .btn.playing {
            animation: pulse 0.6s ease-in-out;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.1rem;
                margin-bottom: 20px;
            }

            .grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .btn {
                padding: 22px 8px;
                font-size: 0.65rem;
            }
        }
    </style>
</head>
<body>
    <h1>Jessie & Charlie's Soundboard</h1>
    <button class="music-toggle" id="musicToggle">&#9835; 80s Vibes: OFF</button>
    <div class="grid" id="soundboard"></div>

    <script>
        const NEON_COLORS = [
            { neon: '#00fff5', dim: 'rgba(0,255,245,0.15)' },   // cyan
            { neon: '#ff00ff', dim: 'rgba(255,0,255,0.15)' },   // magenta
            { neon: '#39ff14', dim: 'rgba(57,255,20,0.15)' },   // lime
            { neon: '#ff6600', dim: 'rgba(255,102,0,0.15)' },   // orange
            { neon: '#ff1493', dim: 'rgba(255,20,147,0.15)' },  // deep pink
            { neon: '#ffff00', dim: 'rgba(255,255,0,0.15)' },   // yellow
            { neon: '#7b68ee', dim: 'rgba(123,104,238,0.15)' }, // medium slate blue
            { neon: '#00ff7f', dim: 'rgba(0,255,127,0.15)' },   // spring green
        ];

        const sayings = [
            { text: '#blessed', audio: null },
            { text: '#youcangetit', audio: null },
            { text: '#extrasmile', audio: null },
            { text: '#jessssssieee', audio: null },
            { text: '#charllieeeee', audio: null },
            { text: '#sogooood', audio: null },
            { text: '#quarterzip', audio: null },
            { text: '#f*ckyoukevin', audio: null },
            { text: '#sundaysuper', audio: null },
            { text: '#whoneedssleep', audio: null },
            { text: '#draksab*tcha*sshoe', audio: null },
            { text: '#roséallday', audio: null },
            { text: '#serendipitous', audio: null },
            { text: '#haveablessedday', audio: null },
            { text: '#ultrabightbeamlight', audio: null },
            { text: '#couchs*x', audio: null },
        ];

        const grid = document.getElementById('soundboard');

        sayings.forEach((saying, i) => {
            const color = NEON_COLORS[i % NEON_COLORS.length];
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = saying.text;
            btn.style.setProperty('--neon', color.neon);
            btn.style.setProperty('--neon-dim', color.dim);

            btn.addEventListener('click', () => playSaying(saying, btn));
            grid.appendChild(btn);
        });

        function playSaying(saying, btn) {
            // Cancel any in-progress TTS
            speechSynthesis.cancel();

            // Remove playing class from all buttons
            document.querySelectorAll('.btn.playing').forEach(b => b.classList.remove('playing'));

            if (saying.audio) {
                const audio = new Audio(saying.audio);
                btn.classList.add('playing');
                audio.play();
                audio.addEventListener('ended', () => btn.classList.remove('playing'));
                audio.addEventListener('error', () => {
                    // Fallback to TTS if audio fails
                    btn.classList.remove('playing');
                    speakText(saying.text, btn);
                });
            } else {
                speakText(saying.text, btn);
            }
        }

        // ─── 80s Pop / New Jack Swing Background Music ───
        // Inspired by: Bobby Brown, New Edition, Starship
        let audioCtx = null;
        let musicPlaying = false;
        let musicInterval = null;
        const musicBtn = document.getElementById('musicToggle');

        const NOTE = {
            Bb1: 58.27, F2: 87.31, G2: 98.00, Ab2: 103.83, Bb2: 116.54, C3: 130.81,
            Db3: 138.59, Eb3: 155.56, F3: 174.61, G3: 196.00, Ab3: 207.65, Bb3: 233.08,
            C4: 261.63, D4: 293.66, Eb4: 311.13, F4: 349.23, G4: 392.00, Ab4: 415.30,
            Bb4: 466.16, C5: 523.25, D5: 587.33, Eb5: 622.25, F5: 698.46,
        };

        // Synth note with bright filter (80s pop shimmer)
        function playNote(freq, startTime, duration, type, volume, filterFreq) {
            const osc = audioCtx.createOscillator();
            const osc2 = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();

            osc.type = type || 'sawtooth';
            osc.frequency.value = freq;
            osc2.type = 'sawtooth';
            osc2.frequency.value = freq;
            osc2.detune.value = 12;

            filter.type = 'lowpass';
            filter.frequency.value = filterFreq || 3000;
            filter.Q.value = 2;

            gain.gain.setValueAtTime(0, startTime);
            gain.gain.linearRampToValueAtTime(volume || 0.06, startTime + 0.01);
            gain.gain.setValueAtTime(volume || 0.06, startTime + duration * 0.6);
            gain.gain.exponentialRampToValueAtTime(0.001, startTime + duration);

            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);

            osc.start(startTime);
            osc.stop(startTime + duration);
            osc2.start(startTime);
            osc2.stop(startTime + duration);
        }

        // Funky bass with snap (New Jack Swing style)
        function playBass(freq, startTime, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();

            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(freq * 2, startTime);
            osc.frequency.exponentialRampToValueAtTime(freq, startTime + 0.04);

            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(2000, startTime);
            filter.frequency.exponentialRampToValueAtTime(500, startTime + 0.1);
            filter.Q.value = 4;

            gain.gain.setValueAtTime(0.18, startTime);
            gain.gain.setValueAtTime(0.14, startTime + 0.04);
            gain.gain.exponentialRampToValueAtTime(0.001, startTime + duration);

            osc.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(startTime);
            osc.stop(startTime + duration);
        }

        // Tight punchy kick (drum machine style)
        function playKick(time) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(170, time);
            osc.frequency.exponentialRampToValueAtTime(40, time + 0.08);
            gain.gain.setValueAtTime(0.45, time);
            gain.gain.exponentialRampToValueAtTime(0.001, time + 0.2);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(time);
            osc.stop(time + 0.2);
            // Click transient
            const click = audioCtx.createOscillator();
            const clickGain = audioCtx.createGain();
            click.type = 'square';
            click.frequency.value = 800;
            clickGain.gain.setValueAtTime(0.08, time);
            clickGain.gain.exponentialRampToValueAtTime(0.001, time + 0.015);
            click.connect(clickGain);
            clickGain.connect(audioCtx.destination);
            click.start(time);
            click.stop(time + 0.015);
        }

        // Crispy hi-hat with swing feel
        function playHiHat(time, vol, open) {
            const len = open ? 0.12 : 0.04;
            const bufferSize = audioCtx.sampleRate * len;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            const src = audioCtx.createBufferSource();
            src.buffer = buffer;
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 8500;
            gain.gain.setValueAtTime(vol || 0.07, time);
            gain.gain.exponentialRampToValueAtTime(0.001, time + len);
            src.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);
            src.start(time);
            src.stop(time + len);
        }

        // Big 80s snare with gated reverb feel
        function playSnare(time) {
            const bufferSize = audioCtx.sampleRate * 0.18;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            const src = audioCtx.createBufferSource();
            src.buffer = buffer;
            const noiseGain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            filter.type = 'bandpass';
            filter.frequency.value = 4000;
            filter.Q.value = 0.8;
            noiseGain.gain.setValueAtTime(0.22, time);
            noiseGain.gain.setValueAtTime(0.18, time + 0.03);
            noiseGain.gain.exponentialRampToValueAtTime(0.001, time + 0.18);
            src.connect(filter);
            filter.connect(noiseGain);
            noiseGain.connect(audioCtx.destination);
            src.start(time);
            src.stop(time + 0.18);
            // Snare body
            const osc = audioCtx.createOscillator();
            const oscGain = audioCtx.createGain();
            osc.type = 'triangle';
            osc.frequency.value = 200;
            oscGain.gain.setValueAtTime(0.18, time);
            oscGain.gain.exponentialRampToValueAtTime(0.001, time + 0.1);
            osc.connect(oscGain);
            oscGain.connect(audioCtx.destination);
            osc.start(time);
            osc.stop(time + 0.1);
        }

        // Synth stab chord (like the brass/synth hits in New Jack Swing)
        function playStab(freqs, time, duration) {
            freqs.forEach(freq => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                osc.type = 'sawtooth';
                osc.frequency.value = freq;
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(4000, time);
                filter.frequency.exponentialRampToValueAtTime(1500, time + duration);
                filter.Q.value = 1;
                gain.gain.setValueAtTime(0.04, time);
                gain.gain.exponentialRampToValueAtTime(0.001, time + duration);
                osc.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start(time);
                osc.stop(time + duration);
            });
        }

        // Synth pad (lush 80s background wash)
        function playPad(freqs, time, duration) {
            freqs.forEach(freq => {
                const osc = audioCtx.createOscillator();
                const osc2 = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                osc.type = 'sawtooth';
                osc.frequency.value = freq;
                osc2.type = 'sawtooth';
                osc2.frequency.value = freq * 1.003;
                filter.type = 'lowpass';
                filter.frequency.value = 1800;
                filter.Q.value = 0.5;
                gain.gain.setValueAtTime(0, time);
                gain.gain.linearRampToValueAtTime(0.025, time + 0.15);
                gain.gain.setValueAtTime(0.025, time + duration * 0.7);
                gain.gain.exponentialRampToValueAtTime(0.001, time + duration);
                osc.connect(filter);
                osc2.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start(time);
                osc.stop(time + duration);
                osc2.start(time);
                osc2.stop(time + duration);
            });
        }

        const BPM = 112;
        const BEAT = 60 / BPM;
        const SWING = 0.66; // Swing ratio for New Jack Swing groove

        // Chord progression: Bb - Gm - Eb - F (classic 80s pop)
        const chords = [
            { bass: NOTE.Bb2, pad: [NOTE.Bb3, NOTE.D4, NOTE.F4], stab: [NOTE.Bb4, NOTE.D5, NOTE.F5] },
            { bass: NOTE.G2,  pad: [NOTE.Bb3, NOTE.D4, NOTE.G4], stab: [NOTE.Bb4, NOTE.D5, NOTE.G4] },
            { bass: NOTE.Eb3, pad: [NOTE.Eb4, NOTE.G4, NOTE.Bb4], stab: [NOTE.Eb5, NOTE.G4, NOTE.Bb4] },
            { bass: NOTE.F2,  pad: [NOTE.F4, NOTE.Ab4, NOTE.C5], stab: [NOTE.F5, NOTE.Ab4, NOTE.C5] },
        ];

        // Funky bass patterns per chord (root, octave, ghost notes)
        const bassPatterns = [
            (root, t) => { // Pattern 1: bouncy
                playBass(root, t, BEAT * 0.4);
                playBass(root * 2, t + BEAT * 0.5, BEAT * 0.3);
                playBass(root, t + BEAT, BEAT * 0.3);
                playBass(root * 2, t + BEAT * 1.75, BEAT * 0.2);
                playBass(root, t + BEAT * 2, BEAT * 0.5);
                playBass(root * 0.75, t + BEAT * 2.5, BEAT * 0.3);
                playBass(root, t + BEAT * 3, BEAT * 0.3);
                playBass(root * 2, t + BEAT * 3.5, BEAT * 0.3);
            },
            (root, t) => { // Pattern 2: syncopated
                playBass(root, t, BEAT * 0.6);
                playBass(root * 2, t + BEAT * 0.75, BEAT * 0.2);
                playBass(root, t + BEAT * 1.5, BEAT * 0.4);
                playBass(root * 2, t + BEAT * 2, BEAT * 0.3);
                playBass(root, t + BEAT * 2.5, BEAT * 0.4);
                playBass(root * 0.84, t + BEAT * 3, BEAT * 0.25);
                playBass(root, t + BEAT * 3.5, BEAT * 0.4);
            },
        ];

        let barIndex = 0;

        function scheduleBar() {
            if (!musicPlaying) return;
            const now = audioCtx.currentTime + 0.05;
            const chordIdx = barIndex % 4;
            const chord = chords[chordIdx];
            const bassPattern = bassPatterns[barIndex % 2];

            // Pad — sustained over the whole bar
            playPad(chord.pad, now, BEAT * 4);

            // Funky bass pattern
            bassPattern(chord.bass, now);

            for (let beat = 0; beat < 4; beat++) {
                const t = now + beat * BEAT;
                const swungOff = t + BEAT * SWING; // Swung offbeat

                // Drums: kick on 1 & 3, snare on 2 & 4
                if (beat === 0 || beat === 2) playKick(t);
                if (beat === 1 || beat === 3) playSnare(t);

                // Ghost kick before beat 3 for NJS feel
                if (beat === 2) playKick(t - BEAT * 0.25);

                // Hi-hats with swing
                playHiHat(t, 0.06, false);
                playHiHat(swungOff, 0.035, beat % 2 === 0);

                // Synth stab on offbeats (New Jack Swing signature)
                if (beat === 0) playStab(chord.stab, t + BEAT * SWING, BEAT * 0.3);
                if (beat === 2) playStab(chord.stab, t, BEAT * 0.25);
                if (beat === 3) playStab(chord.stab, t + BEAT * SWING, BEAT * 0.3);
            }

            barIndex++;
        }

        function startMusic() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            musicPlaying = true;
            barIndex = 0;
            scheduleBar();
            musicInterval = setInterval(scheduleBar, BEAT * 4 * 1000);
            musicBtn.textContent = '\u266B 80s Vibes: ON';
            musicBtn.classList.add('active');
        }

        function stopMusic() {
            musicPlaying = false;
            clearInterval(musicInterval);
            if (audioCtx) {
                audioCtx.close();
                audioCtx = null;
            }
            musicBtn.textContent = '\u266B 80s Vibes: OFF';
            musicBtn.classList.remove('active');
        }

        musicBtn.addEventListener('click', () => {
            if (musicPlaying) stopMusic();
            else startMusic();
        });

        // Pick a fun voice (prefer novelty/non-default voices)
        let funVoice = null;
        function loadVoices() {
            const voices = speechSynthesis.getVoices();
            // Prefer fun/quirky voices, fall back to any non-default
            const preferred = ['Zarvox', 'Trinoids', 'Cellos', 'Boing', 'Whisper', 'Wobble', 'Bad News', 'Bells', 'Good News', 'Bahh'];
            for (const name of preferred) {
                const match = voices.find(v => v.name === name);
                if (match) { funVoice = match; return; }
            }
            // Fallback: pick a higher-pitched or non-default voice
            const nonDefault = voices.find(v => !v.default && v.lang.startsWith('en'));
            if (nonDefault) funVoice = nonDefault;
        }
        speechSynthesis.onvoiceschanged = loadVoices;
        loadVoices();

        function speakText(text, btn) {
            const utterance = new SpeechSynthesisUtterance(text);
            if (funVoice) utterance.voice = funVoice;
            utterance.rate = 1.1;
            utterance.pitch = 1.4;
            btn.classList.add('playing');
            utterance.onend = () => btn.classList.remove('playing');
            utterance.onerror = () => btn.classList.remove('playing');
            speechSynthesis.speak(utterance);
        }
    </script>
</body>
</html>
