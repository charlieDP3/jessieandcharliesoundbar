<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jessie & Charlie's Soundboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Orbitron', sans-serif;
            padding: 20px;
        }

        h1 {
            color: #fff;
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow:
                0 0 10px #ff00ff,
                0 0 20px #ff00ff,
                0 0 40px #ff00ff;
        }

        .music-toggle {
            background: transparent;
            border: 2px solid #ff00ff;
            color: #ff00ff;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            padding: 10px 24px;
            cursor: pointer;
            border-radius: 30px;
            margin-bottom: 24px;
            transition: all 0.2s ease;
            box-shadow: 0 0 8px rgba(255,0,255,0.3);
            text-shadow: 0 0 6px #ff00ff;
        }

        .music-toggle:hover {
            background: rgba(255,0,255,0.15);
            box-shadow: 0 0 15px #ff00ff, 0 0 30px rgba(255,0,255,0.3);
        }

        .music-toggle.active {
            background: #ff00ff;
            color: #0a0a0a;
            text-shadow: none;
            box-shadow: 0 0 20px #ff00ff, 0 0 40px rgba(255,0,255,0.4);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            max-width: 900px;
            width: 100%;
        }

        .btn {
            position: relative;
            background: transparent;
            border: 2px solid var(--neon);
            color: var(--neon);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 28px 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.15s ease;
            box-shadow:
                0 0 8px var(--neon-dim),
                inset 0 0 8px var(--neon-dim);
            text-shadow: 0 0 6px var(--neon);
            word-break: break-word;
        }

        .btn:hover {
            background: var(--neon-dim);
            box-shadow:
                0 0 15px var(--neon),
                0 0 30px var(--neon-dim),
                inset 0 0 15px var(--neon-dim);
            transform: scale(1.03);
        }

        .btn:active,
        .btn.playing {
            background: var(--neon);
            color: #0a0a0a;
            text-shadow: none;
            transform: scale(0.97);
            box-shadow:
                0 0 20px var(--neon),
                0 0 40px var(--neon),
                0 0 60px var(--neon-dim);
        }

        @keyframes pulse {
            0%   { box-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon); }
            50%  { box-shadow: 0 0 30px var(--neon), 0 0 60px var(--neon), 0 0 80px var(--neon-dim); }
            100% { box-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon); }
        }

        .btn.playing {
            animation: pulse 0.6s ease-in-out;
        }

        /* Confetti particles */
        .confetti {
            position: fixed;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            animation: confetti-fly 0.8s ease-out forwards;
        }

        @keyframes confetti-fly {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.2); }
        }

        /* Shake indicator */
        .shake-hint {
            color: rgba(255,255,255,0.3);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.55rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 24px;
            text-align: center;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.1rem;
                margin-bottom: 20px;
            }

            .grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .btn {
                padding: 22px 8px;
                font-size: 0.65rem;
            }
        }
    </style>
</head>
<body>
    <h1>Jessie & Charlie's Soundboard</h1>
    <button class="music-toggle" id="musicToggle">&#9835; 80s Vibes: OFF</button>
    <div class="grid" id="soundboard"></div>
    <div class="shake-hint" id="shakeHint"></div>

    <script>
        const NEON_COLORS = [
            { neon: '#00fff5', dim: 'rgba(0,255,245,0.15)' },   // cyan
            { neon: '#ff00ff', dim: 'rgba(255,0,255,0.15)' },   // magenta
            { neon: '#39ff14', dim: 'rgba(57,255,20,0.15)' },   // lime
            { neon: '#ff6600', dim: 'rgba(255,102,0,0.15)' },   // orange
            { neon: '#ff1493', dim: 'rgba(255,20,147,0.15)' },  // deep pink
            { neon: '#ffff00', dim: 'rgba(255,255,0,0.15)' },   // yellow
            { neon: '#7b68ee', dim: 'rgba(123,104,238,0.15)' }, // medium slate blue
            { neon: '#00ff7f', dim: 'rgba(0,255,127,0.15)' },   // spring green
        ];

        const sayings = [
            { text: '#blessed', audio: null },
            { text: '#youcangetit', audio: null },
            { text: '#extrasmile', audio: null },
            { text: '#jessssssieee', audio: null },
            { text: '#charllieeeee', audio: null },
            { text: '#sogooood', audio: null },
            { text: '#quarterzip', audio: null },
            { text: '#f*ckyoukevin', audio: null },
            { text: '#sundaysuper', audio: null },
            { text: '#whoneedssleep', audio: null },
            { text: '#draksab*tcha*sshoe', audio: null },
            { text: '#roséallday', audio: null },
            { text: '#serendipitous', audio: null },
            { text: '#haveablessedday', audio: null },
            { text: '#ultrabightbeamlight', audio: null },
            { text: '#couchs*x', audio: null },
        ];

        const grid = document.getElementById('soundboard');

        sayings.forEach((saying, i) => {
            const color = NEON_COLORS[i % NEON_COLORS.length];
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = saying.text;
            btn.style.setProperty('--neon', color.neon);
            btn.style.setProperty('--neon-dim', color.dim);

            btn.addEventListener('click', () => playSaying(saying, btn));
            grid.appendChild(btn);
        });

        // ─── Neon Confetti Explosion ───
        function spawnConfetti(btn) {
            const rect = btn.getBoundingClientRect();
            const cx = rect.left + rect.width / 2;
            const cy = rect.top + rect.height / 2;
            const color = getComputedStyle(btn).getPropertyValue('--neon');
            const colors = [color, '#ffffff', color, '#ff00ff', '#00fff5', '#39ff14', '#ffff00'];

            for (let i = 0; i < 18; i++) {
                const particle = document.createElement('div');
                particle.className = 'confetti';
                const angle = (Math.PI * 2 * i) / 18 + (Math.random() - 0.5) * 0.5;
                const dist = 40 + Math.random() * 80;
                const dx = Math.cos(angle) * dist;
                const dy = Math.sin(angle) * dist;
                const size = 4 + Math.random() * 6;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = cx + 'px';
                particle.style.top = cy + 'px';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.boxShadow = '0 0 6px ' + color;
                particle.style.transition = 'left 0.8s ease-out, top 0.8s ease-out';
                document.body.appendChild(particle);
                requestAnimationFrame(() => {
                    particle.style.left = (cx + dx) + 'px';
                    particle.style.top = (cy + dy) + 'px';
                });
                setTimeout(() => particle.remove(), 850);
            }
        }

        function playSaying(saying, btn) {
            // Confetti!
            spawnConfetti(btn);

            // Cancel any in-progress TTS
            speechSynthesis.cancel();

            // Remove playing class from all buttons
            document.querySelectorAll('.btn.playing').forEach(b => b.classList.remove('playing'));

            if (saying.audio) {
                const audio = new Audio(saying.audio);
                btn.classList.add('playing');
                audio.play();
                audio.addEventListener('ended', () => btn.classList.remove('playing'));
                audio.addEventListener('error', () => {
                    // Fallback to TTS if audio fails
                    btn.classList.remove('playing');
                    speakText(saying.text, btn);
                });
            } else {
                speakText(saying.text, btn);
            }
        }

        // ─── 80s Freestyle / Hi-NRG Background Music ───
        // Inspired by: The Cover Girls - Show Me
        let audioCtx = null;
        let musicPlaying = false;
        let musicInterval = null;
        const musicBtn = document.getElementById('musicToggle');

        const NOTE = {
            A2: 110.00, B2: 123.47, C3: 130.81, D3: 146.83, E3: 164.81,
            F3: 174.61, G3: 196.00, A3: 220.00, B3: 246.94, C4: 261.63,
            D4: 293.66, E4: 329.63, F4: 349.23, G4: 392.00, A4: 440.00,
            B4: 493.88, C5: 523.25, D5: 587.33, E5: 659.25, F5: 698.46,
            G5: 783.99, A5: 880.00,
        };

        // Warm freestyle bass (round and bouncy)
        function playBass(freq, time, duration) {
            const osc = audioCtx.createOscillator();
            const sub = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            osc.type = 'sawtooth';
            osc.frequency.value = freq;
            sub.type = 'sine';
            sub.frequency.value = freq;
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(1200, time);
            filter.frequency.exponentialRampToValueAtTime(400, time + duration * 0.5);
            filter.Q.value = 3;
            gain.gain.setValueAtTime(0.16, time);
            gain.gain.setValueAtTime(0.12, time + 0.03);
            gain.gain.exponentialRampToValueAtTime(0.001, time + duration);
            osc.connect(filter);
            sub.connect(gain);
            filter.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(time);
            osc.stop(time + duration);
            sub.start(time);
            sub.stop(time + duration);
        }

        // Four-on-the-floor kick (steady dance beat)
        function playKick(time) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(160, time);
            osc.frequency.exponentialRampToValueAtTime(35, time + 0.1);
            gain.gain.setValueAtTime(0.4, time);
            gain.gain.exponentialRampToValueAtTime(0.001, time + 0.25);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(time);
            osc.stop(time + 0.25);
        }

        // Tight electronic hi-hat (sixteenth notes)
        function playHiHat(time, vol, open) {
            const len = open ? 0.1 : 0.03;
            const bufferSize = audioCtx.sampleRate * len;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            const src = audioCtx.createBufferSource();
            src.buffer = buffer;
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 9000;
            gain.gain.setValueAtTime(vol || 0.05, time);
            gain.gain.exponentialRampToValueAtTime(0.001, time + len);
            src.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);
            src.start(time);
            src.stop(time + len);
        }

        // Electronic clap/snare on 2 and 4
        function playClap(time) {
            const bufferSize = audioCtx.sampleRate * 0.15;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
            const src = audioCtx.createBufferSource();
            src.buffer = buffer;
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            filter.type = 'bandpass';
            filter.frequency.value = 3500;
            filter.Q.value = 1.5;
            // Multi-hit clap envelope
            gain.gain.setValueAtTime(0.2, time);
            gain.gain.setValueAtTime(0.05, time + 0.01);
            gain.gain.setValueAtTime(0.2, time + 0.02);
            gain.gain.setValueAtTime(0.05, time + 0.03);
            gain.gain.setValueAtTime(0.18, time + 0.04);
            gain.gain.exponentialRampToValueAtTime(0.001, time + 0.15);
            src.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);
            src.start(time);
            src.stop(time + 0.15);
        }

        // Shimmering freestyle arpeggio note
        function playArp(freq, time, duration) {
            const osc = audioCtx.createOscillator();
            const osc2 = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            osc.type = 'sawtooth';
            osc.frequency.value = freq;
            osc2.type = 'sawtooth';
            osc2.frequency.value = freq;
            osc2.detune.value = 8;
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(5000, time);
            filter.frequency.exponentialRampToValueAtTime(2000, time + duration);
            filter.Q.value = 3;
            gain.gain.setValueAtTime(0, time);
            gain.gain.linearRampToValueAtTime(0.045, time + 0.005);
            gain.gain.exponentialRampToValueAtTime(0.001, time + duration);
            osc.connect(filter);
            osc2.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(time);
            osc.stop(time + duration);
            osc2.start(time);
            osc2.stop(time + duration);
        }

        // Lush string/pad wash
        function playPad(freqs, time, duration) {
            freqs.forEach(freq => {
                const osc = audioCtx.createOscillator();
                const osc2 = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                osc.type = 'sawtooth';
                osc.frequency.value = freq;
                osc2.type = 'sawtooth';
                osc2.frequency.value = freq * 1.004;
                filter.type = 'lowpass';
                filter.frequency.value = 2200;
                filter.Q.value = 0.4;
                gain.gain.setValueAtTime(0, time);
                gain.gain.linearRampToValueAtTime(0.022, time + 0.2);
                gain.gain.setValueAtTime(0.022, time + duration * 0.75);
                gain.gain.exponentialRampToValueAtTime(0.001, time + duration);
                osc.connect(filter);
                osc2.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start(time);
                osc.stop(time + duration);
                osc2.start(time);
                osc2.stop(time + duration);
            });
        }

        // Conga/tom hit for Latin freestyle flavor
        function playConga(time, freq) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(freq || 280, time);
            osc.frequency.exponentialRampToValueAtTime((freq || 280) * 0.6, time + 0.08);
            gain.gain.setValueAtTime(0.1, time);
            gain.gain.exponentialRampToValueAtTime(0.001, time + 0.12);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(time);
            osc.stop(time + 0.12);
        }

        const BPM = 118;
        const BEAT = 60 / BPM;
        const S16 = BEAT / 4; // Sixteenth note

        // Chord progression: Am - F - G - Em (minor key freestyle feel)
        const chords = [
            { bass: NOTE.A2, pad: [NOTE.A3, NOTE.C4, NOTE.E4], arp: [NOTE.A4, NOTE.C5, NOTE.E5, NOTE.A5, NOTE.E5, NOTE.C5, NOTE.A4, NOTE.E4] },
            { bass: NOTE.F3, pad: [NOTE.F3, NOTE.A3, NOTE.C4], arp: [NOTE.F4, NOTE.A4, NOTE.C5, NOTE.F5, NOTE.C5, NOTE.A4, NOTE.F4, NOTE.C4] },
            { bass: NOTE.G3, pad: [NOTE.G3, NOTE.B3, NOTE.D4], arp: [NOTE.G4, NOTE.B4, NOTE.D5, NOTE.G5, NOTE.D5, NOTE.B4, NOTE.G4, NOTE.D4] },
            { bass: NOTE.E3, pad: [NOTE.E3, NOTE.G3, NOTE.B3], arp: [NOTE.E4, NOTE.G4, NOTE.B4, NOTE.E5, NOTE.B4, NOTE.G4, NOTE.E4, NOTE.B3] },
        ];

        let barIndex = 0;

        function scheduleBar() {
            if (!musicPlaying) return;
            const now = audioCtx.currentTime + 0.05;
            const chordIdx = barIndex % 4;
            const chord = chords[chordIdx];

            // Pad — warm wash over the whole bar
            playPad(chord.pad, now, BEAT * 4);

            // Bass pattern — driving eighth-note freestyle bass
            const b = chord.bass;
            playBass(b, now, BEAT * 0.45);
            playBass(b, now + BEAT * 0.5, BEAT * 0.35);
            playBass(b, now + BEAT, BEAT * 0.45);
            playBass(b * 2, now + BEAT * 1.5, BEAT * 0.25);
            playBass(b, now + BEAT * 2, BEAT * 0.45);
            playBass(b, now + BEAT * 2.5, BEAT * 0.35);
            playBass(b * 1.335, now + BEAT * 3, BEAT * 0.35); // Walk up (fifth)
            playBass(b * 1.498, now + BEAT * 3.5, BEAT * 0.35); // Walk up more

            for (let beat = 0; beat < 4; beat++) {
                const t = now + beat * BEAT;

                // Four-on-the-floor kick on every beat
                playKick(t);

                // Clap on 2 and 4
                if (beat === 1 || beat === 3) playClap(t);

                // Sixteenth-note hi-hats (the freestyle signature)
                for (let s = 0; s < 4; s++) {
                    const ht = t + s * S16;
                    const isDownbeat = s === 0;
                    const isOpen = s === 2 && beat % 2 === 0;
                    playHiHat(ht, isDownbeat ? 0.055 : 0.03, isOpen);
                }

                // Shimmering arpeggio — two notes per beat (eighth notes)
                const arpIdx = beat * 2;
                playArp(chord.arp[arpIdx], t, BEAT * 0.48);
                playArp(chord.arp[arpIdx + 1], t + BEAT * 0.5, BEAT * 0.48);

                // Conga pattern — freestyle Latin groove
                if (beat === 0) playConga(t + BEAT * 0.5, 300);
                if (beat === 1) { playConga(t, 260); playConga(t + BEAT * 0.75, 320); }
                if (beat === 2) playConga(t + BEAT * 0.5, 300);
                if (beat === 3) { playConga(t, 280); playConga(t + BEAT * 0.5, 340); }
            }

            barIndex++;
        }

        function startMusic() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            musicPlaying = true;
            barIndex = 0;
            scheduleBar();
            musicInterval = setInterval(scheduleBar, BEAT * 4 * 1000);
            musicBtn.textContent = '\u266B 80s Vibes: ON';
            musicBtn.classList.add('active');
        }

        function stopMusic() {
            musicPlaying = false;
            clearInterval(musicInterval);
            if (audioCtx) {
                audioCtx.close();
                audioCtx = null;
            }
            musicBtn.textContent = '\u266B 80s Vibes: OFF';
            musicBtn.classList.remove('active');
        }

        musicBtn.addEventListener('click', () => {
            if (musicPlaying) stopMusic();
            else startMusic();
        });

        // Pick a female voice to sound like Madonna
        let madonnaVoice = null;
        function loadVoices() {
            const voices = speechSynthesis.getVoices();
            // Prefer female English voices that sound confident/breathy
            const preferred = [
                'Samantha', 'Karen', 'Moira', 'Tessa', 'Victoria',  // macOS
                'Microsoft Zira', 'Microsoft Jenny', 'Microsoft Aria', // Windows
                'Google US English', 'Google UK English Female',       // Chrome
            ];
            for (const name of preferred) {
                const match = voices.find(v => v.name.includes(name));
                if (match) { madonnaVoice = match; return; }
            }
            // Fallback: any female-sounding English voice (avoid male names)
            const maleNames = ['David', 'James', 'Daniel', 'Alex', 'Fred', 'Mark', 'Guy'];
            const femaleVoice = voices.find(v =>
                v.lang.startsWith('en') && !maleNames.some(m => v.name.includes(m))
            );
            if (femaleVoice) madonnaVoice = femaleVoice;
        }
        speechSynthesis.onvoiceschanged = loadVoices;
        loadVoices();

        function speakText(text, btn) {
            const utterance = new SpeechSynthesisUtterance(text);
            if (madonnaVoice) utterance.voice = madonnaVoice;
            utterance.rate = 0.95;   // Slightly slow, confident delivery
            utterance.pitch = 1.6;   // Higher pitch, Madonna-like
            btn.classList.add('playing');
            utterance.onend = () => btn.classList.remove('playing');
            utterance.onerror = () => btn.classList.remove('playing');
            speechSynthesis.speak(utterance);
        }

        // ─── Shake to Play Random Saying ───
        const allBtns = document.querySelectorAll('.btn');
        let lastShake = 0;
        let lastAccel = { x: 0, y: 0, z: 0 };
        const SHAKE_THRESHOLD = 25;
        const SHAKE_COOLDOWN = 1000;

        if (window.DeviceMotionEvent) {
            // Show hint on mobile
            const hint = document.getElementById('shakeHint');
            if ('ontouchstart' in window) {
                hint.textContent = 'Shake your phone for a random saying!';
            }

            window.addEventListener('devicemotion', (e) => {
                const a = e.accelerationIncludingGravity;
                if (!a) return;
                const dx = Math.abs(a.x - lastAccel.x);
                const dy = Math.abs(a.y - lastAccel.y);
                const dz = Math.abs(a.z - lastAccel.z);
                lastAccel = { x: a.x, y: a.y, z: a.z };

                if ((dx + dy + dz) > SHAKE_THRESHOLD) {
                    const now = Date.now();
                    if (now - lastShake > SHAKE_COOLDOWN) {
                        lastShake = now;
                        const idx = Math.floor(Math.random() * sayings.length);
                        const btn = allBtns[idx];
                        playSaying(sayings[idx], btn);
                    }
                }
            });
        }
    </script>
</body>
</html>
